{% extends "base.html" %}
{% load static %}
{% block styles %}<link rel="stylesheet" href="{% static 'css/navbar.css' %}"{% endblock styles %}

{% block content %}
<style>
    [x-cloak]{display:none !important;}
</style>
<div class="col-lg-12 mt-4" x-data="{ open: false }" x-init="window.addEventListener('resize', () => {if (window.innerWidth > 900) open = false;});">
    <nav class="first-nav">
        <ul>
            <li class="logo"><a href="{% url 'home' %}"><h4><span>K.</span><strong>Kama-Blog</strong></h4></a></li>
            <li class="items"><a href="{% url 'home' %}">Home</a></li>
            <li class="items"><a href="{% url 'article_list' %}">Articles</a></li>
            <li class="items"><a href="{% url 'archives' %}">Archives</a></li>
            <li class="items"><a href=""><i class="fas fa-search" id="search-bar"></i></a></li>
            {% if user.is_authenticated %}
                <li class="items" id="user-pp">
                    {% if user.profile.photo.url %}
                        <img src="{{ user.profile.photo.url }}"> 
                    {% else %}
                        <img src="{% static 'images/default-avatar.png' %}">
                    {% endif %}
                    {{ user.username }}
                </li>
                <button><a href="{% url 'logout_user' %}">Logout</a></button>
            {% else %}
                <li class="items"><a href="{% url 'login_user' %}" class="connexion-button">Connexion</a></li>
                <li class="items"><a href="{% url 'register' %}" class="inscrire-button">S'inscrire</a></li>
            {% endif %}
            <button @click="open = !open" class="burger-button">
                <i class="fa-solid" :class="open ? 'fa-xmark' : 'fa-bars'" style="font-size:22px;"></i>
            </button>
        </ul>
    </nav>
    <!-- Menu mobile -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-xm-12 col-sm-12">
                <div class="mobile-menu" x-show="open" x-cloak x-transition.duration.600ms @click.outside="open=false">
                    <a href="{% url 'home' %}">Home</a>
                    <a href="{% url 'article_list' %}">Articles</a>
                    <a href="{% url 'archives' %}">Archives</a>
                    <a href=""><i class="fas fa-search" id="search-bar"></i></a>
                    {% if user.is_authenticated %}
                        <li class="items mt-3" id="user-pp">
                            {% if user.profile.photo.url %}
                                <img src="{{ user.profile.photo.url }}"> 
                            {% else %}
                                <img src="{% static 'images/default-avatar.png' %}">
                            {% endif %}
                            {{ user.username }}
                        </li>
                    {% else %}
                        <li class="items"><a href="{% url 'login_user' %}" class="connexion-button">Connexion</a></li>
                        <li class="items"><a href="{% url 'register' %}" class="inscrire-button">S'inscrire</a></li>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock content %}